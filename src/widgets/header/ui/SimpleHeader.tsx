import { useCallback, useState } from "react";

import { TELEGRAM, WHATSAPP } from "@/shared/lib/constants";
import { Widths } from "@/shared/lib/enums";
import { AppLink } from "@/shared/ui/app-link";
import { Logo } from "@/shared/ui/icons";
import { InterruptModal } from "@/features/interrupt-modal/";

export const SimpleHeader = () => {
  const [isOpenModal, toggleModal, setIsOpenModal] = useInterruptModal();

  return (
    <>
      <header className="h-20 md:h-[76px] flex items-center justify-center md:justify-between">
        <button onClick={toggleModal}>
          <Logo width={Widths.DESKTOP} />
        </button>
        <div className="hidden md:flex md:items-center md:gap-6">
          <AppLink
            to={TELEGRAM}
            title="Telegram"
            target="_blank"
            className="flex items-center gap-3"
          >
            <span className="">
              <svg
                width="20"
                height="18"
                viewBox="0 0 20 18"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  fillRule="evenodd"
                  clipRule="evenodd"
                  d="M19.6612 0.249824C19.9416 0.496988 20.0608 0.879914 19.9701 1.24255L15.9701 17.2426C15.8828 17.5921 15.6141 17.8676 15.2669 17.9637C14.9197 18.0599 14.5476 17.9619 14.2929 17.7071L10.1082 13.5224L7.80001 16.6C7.57684 16.8976 7.20697 17.0467 6.83982 16.9871C6.47268 16.9275 6.16894 16.6691 6.05132 16.3162L4.18231 10.7092L0.552792 8.89445C0.199015 8.71756 -0.0172568 8.34877 0.00108085 7.95366C0.0194185 7.55855 0.268919 7.21137 0.637559 7.06801L18.6376 0.068013C18.9859 -0.0674695 19.3808 0.00266075 19.6612 0.249824ZM10.7193 11.3051C10.7119 11.2975 10.7044 11.2899 10.6967 11.2825L10.4142 11L13.7071 7.70712C14.0976 7.3166 14.0976 6.68343 13.7071 6.29291C13.3166 5.90239 12.6834 5.90239 12.2929 6.29291L8.2929 10.2929C7.90237 10.6834 7.90237 11.3166 8.2929 11.7071L8.67963 12.0939L7.34515 13.8732L5.94869 9.68379C5.86482 9.43218 5.68444 9.2242 5.44722 9.10559L3.46487 8.11442L17.5611 2.63255L14.4582 15.044L10.7193 11.3051Z"
                  fill="#064CFF"
                />
              </svg>
            </span>
            Telegram
          </AppLink>
          <AppLink
            to={WHATSAPP}
            title="Whatsapp"
            target="_blank"
            className="flex items-center gap-3"
          >
            <span className="">
              <svg
                width="20"
                height="21"
                viewBox="0 0 20 21"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  fillRule="evenodd"
                  clipRule="evenodd"
                  d="M15.1995 3.92993C13.7171 2.66554 11.8242 1.98559 9.87611 2.01769C7.92799 2.04979 6.05855 2.79174 4.61862 4.10429C3.17869 5.41683 2.26726 7.20976 2.05537 9.14658C1.84348 11.0834 2.34569 13.031 3.46777 14.6238C3.66862 14.9089 3.70642 15.2781 3.56752 15.598L2.65994 17.6882L5.8748 17.1152C6.08383 17.078 6.2993 17.1082 6.49 17.2016C8.23988 18.0584 10.2423 18.2471 12.1215 17.7324C14.0006 17.2176 15.6273 16.0348 16.6963 14.4058C17.7653 12.7769 18.2031 10.8138 17.9275 8.88504C17.6519 6.95625 16.6819 5.19433 15.1995 3.92993ZM0.883847 19.9932C0.986806 20.0053 1.08978 20.001 1.18929 19.9818L5.91332 19.1399C8.02707 20.0886 10.4086 20.2752 12.6498 19.6613C14.9988 19.0179 17.0322 17.5393 18.3684 15.5031C19.7046 13.467 20.2519 11.0131 19.9074 8.60215C19.5629 6.19116 18.3504 3.98876 16.4974 2.40826C14.6444 0.827769 12.2783 -0.0221667 9.84316 0.0179602C7.40801 0.058087 5.07121 0.985518 3.2713 2.62621C1.47139 4.26689 0.332094 6.50805 0.0672299 8.92908C-0.176852 11.1601 0.337121 13.4026 1.51695 15.299L0.0884898 18.5888C0.0467586 18.6811 0.0188126 18.7803 0.00678686 18.8833C-0.00774713 19.007 0.0013089 19.1306 0.0315836 19.2483C0.0671316 19.3874 0.130911 19.513 0.215577 19.6199C0.37846 19.8256 0.618647 19.9622 0.883847 19.9932Z"
                  fill="#0FC040"
                />
                <path
                  fillRule="evenodd"
                  clipRule="evenodd"
                  d="M6.43959 5.93907C6.7209 5.65776 7.10243 5.49973 7.50025 5.49973C7.89808 5.49973 8.27961 5.65776 8.56091 5.93907C8.84222 6.22037 9.00025 6.6019 9.00025 6.99973V7.99973C9.00025 8.39755 8.84222 8.77908 8.56091 9.06039C8.45976 9.16154 8.34565 9.24676 8.22248 9.31441C8.41891 9.87884 8.74121 10.3975 9.17183 10.8282C9.60245 11.2588 10.1211 11.5811 10.6856 11.7775C10.7532 11.6543 10.8384 11.5402 10.9396 11.4391C11.2209 11.1578 11.6024 10.9997 12.0003 10.9997H13.0003C13.3981 10.9997 13.7796 11.1578 14.0609 11.4391C14.3422 11.7204 14.5003 12.1019 14.5003 12.4997C14.5003 12.8975 14.3422 13.2791 14.0609 13.5604C13.7796 13.8417 13.3981 13.9997 13.0003 13.9997H12.0003C10.409 13.9997 8.88283 13.3676 7.75761 12.2424C6.63239 11.1171 6.00025 9.59103 6.00025 7.99973V6.99973C6.00025 6.6019 6.15829 6.22037 6.43959 5.93907Z"
                  fill="#0FC040"
                />
              </svg>
            </span>
            WhatsApp
          </AppLink>
        </div>
      </header>
      <InterruptModal
        isOpenModal={isOpenModal}
        setIsOpenModal={setIsOpenModal}
      />
    </>
  );
};

function useInterruptModal() {
  const [isOpenModal, setIsOpenModal] = useState(false);

  const toggleModal = useCallback(() => {
    setIsOpenModal((prev) => !prev);
  }, []);

  return [isOpenModal, toggleModal, setIsOpenModal] as const;
}
